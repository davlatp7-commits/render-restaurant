<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω—é</title>
    <!-- Modern mobile stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile.css') }}">
</head>
<body>
    <!-- Top bar with restaurant name -->
    <div style="padding: 16px 12px; font-size: 22px; font-weight: 700;">
        –ì–µ–º—Ä–∏ & –≠–ª–∏ —Ö–∏–Ω–∫–∞–ª—å–Ω–∞—è
    </div>

    <!-- Side information panel with contact and working hours -->
    <div class="info-panel">
        <p><strong>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</strong> 10:00‚Äì22:00</p>
        <p><strong>–°–∞–º–æ–≤—ã–≤–æ–∑:</strong> –¥–æ—Å—Ç—É–ø–µ–Ω</p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (903) 240 25 55</p>
        <p><strong>–ê–¥—Ä–µ—Å:</strong> –≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ë–µ–ª–æ–º–æ—Ä—Å–∫–∞—è, 16–∞</p>
    </div>
    <!-- Category selector -->
    <div class="categories">
        <a href="{{ url_for('client.index') }}" class="category-tab {{ 'active' if not selected_category else '' }}">–í—Å–µ</a>
        {% for cat in categories %}
            <a href="{{ url_for('client.index', category=cat) }}" class="category-tab {{ 'active' if selected_category == cat else '' }}">{{ cat }}</a>
        {% endfor %}
    </div>

    <!-- Dish list -->
    <div class="dish-list">
        {% for dish in dishes %}
        <div class="dish-card">
            {% if dish.image_filename %}
                {% if dish.image_filename.startswith('http') %}
                    <img src="{{ dish.image_filename }}" alt="{{ dish.name }}">
                {% else %}
                    <img src="{{ url_for('static', filename='img/' + dish.image_filename) }}" alt="{{ dish.name }}">
                {% endif %}
            {% else %}
                <!-- Fallback image when no picture is provided -->
                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="{{ dish.name }}">
            {% endif %}
            <div class="dish-info">
                <div class="dish-name">{{ dish.name }}</div>
                <div class="dish-desc">{{ dish.description }}</div>
                {% if dish.weight %}<div class="dish-weight">{{ dish.weight }}</div>{% endif %}
                <div class="dish-bottom">
                    <div class="dish-price">{{ '%.0f'|format(dish.price) }} ‚ÇΩ</div>
                    <form action="{{ url_for('client.add_to_cart', dish_id=dish.id) }}" method="post">
                        <input type="hidden" name="quantity" value="1">
                        <button type="submit" class="btn-add">+</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Bottom navigation -->
    <div class="navbar">
        <a href="{{ url_for('client.index') }}" class="nav-item active">
            <div class="icon">üè†</div>
            <div>–ú–µ–Ω—é</div>
        </a>
        <a href="{{ url_for('client.cart') }}" class="nav-item">
            <div class="icon">üõí</div>
            <div>–ö–æ—Ä–∑–∏–Ω–∞</div>
            {% set cart_count = session.get('cart', {}).values() | sum %}
            {% if cart_count > 0 %}
            <div class="badge">{{ cart_count }}</div>
            {% endif %}
        </a>
    </div>
</body>
</html>
